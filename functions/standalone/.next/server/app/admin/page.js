(()=>{var e={};e.id=3698,e.ids=[3698,5069],e.modules={163:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unstable_rethrow",{enumerable:!0,get:function(){return r}});let r=s(71042).unstable_rethrow;("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},1132:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s(37413),a=s(39916),n=s(19854),l=s(12909),i=s(25846);async function c(){let e=await (0,n.getServerSession)(l.N);return e||(0,a.redirect)("/auth/signin?callbackUrl=/admin"),"ADMIN"!==e.user.role&&"CONCIERGE"!==e.user.role&&(0,a.redirect)("/dashboard"),(0,r.jsx)(i.default,{})}},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},5069:(e,t,s)=>{"use strict";s.d(t,{db:()=>a,prisma:()=>n});var r=s(96330);let a=globalThis.prisma??new r.PrismaClient({log:["query"]}),n=a},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11723:e=>{"use strict";e.exports=require("querystring")},12412:e=>{"use strict";e.exports=require("assert")},12909:(e,t,s)=>{"use strict";s.d(t,{N:()=>c});var r=s(60890),a=s(13581),n=s(36344),l=s(5069),i=s(85663);let c={adapter:(0,r.y)(l.db),providers:[...process.env.GOOGLE_CLIENT_ID&&process.env.GOOGLE_CLIENT_SECRET?[(0,n.A)({clientId:process.env.GOOGLE_CLIENT_ID,clientSecret:process.env.GOOGLE_CLIENT_SECRET})]:[],(0,a.A)({name:"credentials",credentials:{email:{label:"Email",type:"email"},password:{label:"Password",type:"password"}},async authorize(e){if(!e?.email||!e?.password)return null;let t=await l.db.users.findUnique({where:{email:e.email}});return t&&t.password&&await i.Ay.compare(e.password,t.password)?{id:t.id,email:t.email,name:t.name,role:t.role}:null}})],session:{strategy:"jwt"},callbacks:{jwt:async({token:e,user:t})=>(t&&(e.role=t.role),e),session:async({session:e,token:t})=>(t&&(e.user.id=t.sub,e.user.role=t.role),e)},pages:{signIn:"/auth/signin"}}},13581:(e,t)=>{"use strict";t.A=function(e){return{id:"credentials",name:"Credentials",type:"credentials",credentials:{},authorize:()=>null,options:e}}},13861:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(40307).A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21820:e=>{"use strict";e.exports=require("os")},25846:(e,t,s)=>{"use strict";s.d(t,{default:()=>r});let r=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/macbookprom1/apexrebate-1/src/app/admin/admin-client.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/macbookprom1/apexrebate-1/src/app/admin/admin-client.tsx","default")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},28559:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(40307).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},31158:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(40307).A)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])},33873:e=>{"use strict";e.exports=require("path")},34574:(e,t,s)=>{Promise.resolve().then(s.bind(s,76826))},34631:e=>{"use strict";e.exports=require("tls")},36344:(e,t)=>{"use strict";t.A=function(e){return{id:"google",name:"Google",type:"oauth",wellKnown:"https://accounts.google.com/.well-known/openid-configuration",authorization:{params:{scope:"openid email profile"}},idToken:!0,checks:["pkce","state"],profile:e=>({id:e.sub,name:e.name,email:e.email,image:e.picture}),style:{logo:"/google.svg",bg:"#fff",text:"#000"},options:e}}},39916:(e,t,s)=>{"use strict";var r=s(97576);s.o(r,"redirect")&&s.d(t,{redirect:function(){return r.redirect}})},48486:(e,t,s)=>{Promise.resolve().then(s.bind(s,25846))},48641:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>u,pages:()=>o,routeModule:()=>x,tree:()=>d});var r=s(65239),a=s(48088),n=s(88170),l=s.n(n),i=s(30893),c={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);s.d(t,c);let d={children:["",{children:["admin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,1132)),"/Users/macbookprom1/apexrebate-1/src/app/admin/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,94431)),"/Users/macbookprom1/apexrebate-1/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,o=["/Users/macbookprom1/apexrebate-1/src/app/admin/page.tsx"],u={require:s,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/admin/page",pathname:"/admin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},48976:(e,t,s)=>{"use strict";function r(){throw Object.defineProperty(Error("`forbidden()` is experimental and only allowed to be enabled when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E488",enumerable:!1,configurable:!0})}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"forbidden",{enumerable:!0,get:function(){return r}}),s(8704).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},60890:(e,t)=>{"use strict";t.y=void 0,t.y=function(e){return{createUser:t=>e.user.create({data:t}),getUser:t=>e.user.findUnique({where:{id:t}}),getUserByEmail:t=>e.user.findUnique({where:{email:t}}),async getUserByAccount(t){var s;let r=await e.account.findUnique({where:{provider_providerAccountId:t},select:{user:!0}});return null!=(s=null==r?void 0:r.user)?s:null},updateUser:({id:t,...s})=>e.user.update({where:{id:t},data:s}),deleteUser:t=>e.user.delete({where:{id:t}}),linkAccount:t=>e.account.create({data:t}),unlinkAccount:t=>e.account.delete({where:{provider_providerAccountId:t}}),async getSessionAndUser(t){let s=await e.session.findUnique({where:{sessionToken:t},include:{user:!0}});if(!s)return null;let{user:r,...a}=s;return{user:r,session:a}},createSession:t=>e.session.create({data:t}),updateSession:t=>e.session.update({where:{sessionToken:t.sessionToken},data:t}),deleteSession:t=>e.session.delete({where:{sessionToken:t}}),async createVerificationToken(t){let s=await e.verificationToken.create({data:t});return s.id&&delete s.id,s},async useVerificationToken(t){try{let s=await e.verificationToken.delete({where:{identifier_token:t}});return s.id&&delete s.id,s}catch(e){if("P2025"===e.code)return null;throw e}}}}},62765:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"notFound",{enumerable:!0,get:function(){return a}});let r=""+s(8704).HTTP_ERROR_FALLBACK_ERROR_CODE+";404";function a(){let e=Object.defineProperty(Error(r),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});throw e.digest=r,e}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},70899:(e,t,s)=>{"use strict";function r(){throw Object.defineProperty(Error("`unauthorized()` is experimental and only allowed to be used when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E411",enumerable:!1,configurable:!0})}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unauthorized",{enumerable:!0,get:function(){return r}}),s(8704).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},71042:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unstable_rethrow",{enumerable:!0,get:function(){return function e(t){if((0,l.isNextRouterError)(t)||(0,n.isBailoutToCSRError)(t)||(0,c.isDynamicServerError)(t)||(0,i.isDynamicPostpone)(t)||(0,a.isPostpone)(t)||(0,r.isHangingPromiseRejectionError)(t))throw t;t instanceof Error&&"cause"in t&&e(t.cause)}}});let r=s(68388),a=s(52637),n=s(51846),l=s(31162),i=s(84971),c=s(98479);("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},74075:e=>{"use strict";e.exports=require("zlib")},76826:(e,t,s)=>{"use strict";s.d(t,{default:()=>A});var r=s(60687),a=s(43210),n=s(82136),l=s(16189),i=s(44493),c=s(29523),d=s(96834),o=s(89667),u=s(15079),x=s(85763),h=s(78122),m=s(31158),p=s(41312),f=s(5336),j=s(23928),b=s(48730),g=s(25541),v=s(99270),y=s(93613),N=s(13861),w=s(84027),_=s(90561);let R=(0,s(40307).A)("shield-x",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m14.5 9.5-5 5",key:"17q4r4"}],["path",{d:"m9.5 9.5 5 5",key:"18nt4w"}]]);var E=s(28559),O=s(85814),T=s.n(O);function C({children:e,allowedRoles:t,fallback:s}){let{data:a,status:d}=(0,n.useSession)();return((0,l.useRouter)(),"loading"===d)?(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-slate-600",children:"Đang kiểm tra quyền truy cập..."})]})}):a?t.includes(a.user.role||"")?(0,r.jsx)(r.Fragment,{children:e}):s||(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white flex items-center justify-center px-4",children:(0,r.jsx)("div",{className:"max-w-md w-full",children:(0,r.jsxs)(i.Zp,{children:[(0,r.jsxs)(i.aR,{className:"text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)(R,{className:"w-8 h-8 text-red-600"})}),(0,r.jsx)(i.ZB,{className:"text-2xl",children:"Quyền truy cập bị từ chối"})]}),(0,r.jsxs)(i.Wu,{className:"space-y-4 text-center",children:[(0,r.jsx)("p",{className:"text-slate-600",children:"Bạn kh\xf4ng c\xf3 quyền truy cập trang n\xe0y."}),(0,r.jsxs)("p",{className:"text-sm text-slate-500",children:["Vai tr\xf2 của bạn: ",(0,r.jsx)("span",{className:"font-semibold",children:a.user.role})]}),(0,r.jsxs)("p",{className:"text-sm text-slate-500",children:["Quyền y\xeau cầu: ",(0,r.jsx)("span",{className:"font-semibold",children:t.join(", ")})]}),(0,r.jsx)(T(),{href:"/dashboard",children:(0,r.jsxs)(c.$,{variant:"outline",className:"w-full",children:[(0,r.jsx)(E.A,{className:"w-4 h-4 mr-2"}),"Quay lại Dashboard"]})})]})]})})}):(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white flex items-center justify-center px-4",children:(0,r.jsx)("div",{className:"max-w-md w-full",children:(0,r.jsxs)(i.Zp,{children:[(0,r.jsxs)(i.aR,{className:"text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)(R,{className:"w-8 h-8 text-blue-600"})}),(0,r.jsx)(i.ZB,{className:"text-2xl",children:"Y\xeau cầu x\xe1c thực"})]}),(0,r.jsxs)(i.Wu,{className:"space-y-4 text-center",children:[(0,r.jsx)("p",{className:"text-slate-600",children:"Bạn cần đăng nhập để truy cập trang n\xe0y."}),(0,r.jsx)(T(),{href:"/auth/signin",children:(0,r.jsx)(c.$,{className:"w-full bg-blue-600 hover:bg-blue-700",children:"Đăng nhập"})})]})]})})})}var P=s(95718),k=s(52581);function A(){let{data:e,status:t}=(0,n.useSession)();(0,l.useRouter)();let[s,R]=(0,a.useState)(null),[E,O]=(0,a.useState)([]),[T,A]=(0,a.useState)([]),[S,q]=(0,a.useState)(!0),[M,D]=(0,a.useState)("overview"),[L,U]=(0,a.useState)({userRole:"all",userStatus:"all",payoutStatus:"all",search:""}),I=async()=>{q(!0);try{let[e,t,s]=await Promise.all([fetch("/api/admin/stats"),fetch("/api/admin/users"),fetch("/api/admin/payouts")]),r=await e.json(),a=await t.json(),n=await s.json();r.success&&R(r.data),a.success&&O(a.data),n.success&&A(n.data)}catch(e){console.error("Failed to fetch admin data:",e),k.oR.error("Kh\xf4ng thể tải dữ liệu quản trị")}finally{q(!1)}},G=async e=>{try{let t=await fetch(`/api/admin/payouts/${e}/process`,{method:"POST"}),s=await t.json();s.success?(k.oR.success("Đ\xe3 xử l\xfd thanh to\xe1n th\xe0nh c\xf4ng"),I()):k.oR.error(s.error||"Kh\xf4ng thể xử l\xfd thanh to\xe1n")}catch(e){k.oR.error("C\xf3 lỗi xảy ra")}},z=E.filter(e=>("all"===L.userRole||e.role===L.userRole)&&("verified"!==L.userStatus||!!e.emailVerified)&&("unverified"!==L.userStatus||!e.emailVerified)&&(!L.search||!!e.name.toLowerCase().includes(L.search.toLowerCase())||!!e.email.toLowerCase().includes(L.search.toLowerCase()))),B=T.filter(e=>"all"===L.payoutStatus||e.status===L.payoutStatus);return"loading"===t||S?(0,r.jsx)("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-slate-600",children:"Loading..."})]})}):(0,r.jsx)(_.A,{children:(0,r.jsx)(C,{allowedRoles:["ADMIN","CONCIERGE"],children:(0,r.jsxs)("div",{className:"min-h-screen bg-slate-50",children:[(0,r.jsx)(P.A,{}),(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Quản trị hệ thống"}),(0,r.jsx)("p",{className:"text-slate-600",children:"Quản l\xfd người d\xf9ng v\xe0 thanh to\xe1n ApexRebate"})]}),(0,r.jsxs)("div",{className:"flex space-x-3",children:[(0,r.jsxs)(c.$,{variant:"outline",onClick:I,children:[(0,r.jsx)(h.A,{className:"w-4 h-4 mr-2"}),"L\xe0m mới"]}),(0,r.jsxs)(c.$,{variant:"outline",children:[(0,r.jsx)(m.A,{className:"w-4 h-4 mr-2"}),"Xuất b\xe1o c\xe1o"]})]})]}),(0,r.jsxs)(x.Tabs,{value:M,onValueChange:D,className:"space-y-6",children:[(0,r.jsxs)(x.TabsList,{className:"grid w-full grid-cols-4",children:[(0,r.jsx)(x.TabsTrigger,{value:"overview",children:"Tổng quan"}),(0,r.jsx)(x.TabsTrigger,{value:"users",children:"Người d\xf9ng"}),(0,r.jsx)(x.TabsTrigger,{value:"payouts",children:"Thanh to\xe1n"}),(0,r.jsx)(x.TabsTrigger,{value:"settings",children:"C\xe0i đặt"})]}),(0,r.jsx)(x.TabsContent,{value:"overview",className:"space-y-6",children:s&&(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,r.jsx)(i.Zp,{children:(0,r.jsxs)(i.Wu,{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-slate-600",children:"Tổng người d\xf9ng"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-slate-900",children:s.totalUsers})]}),(0,r.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:(0,r.jsx)(p.A,{className:"w-6 h-6 text-blue-600"})})]}),(0,r.jsxs)("div",{className:"flex items-center mt-2 text-sm",children:[(0,r.jsx)(f.A,{className:"w-4 h-4 text-green-600 mr-1"}),(0,r.jsxs)("span",{className:"text-green-600",children:[s.verifiedUsers," đ\xe3 x\xe1c thực"]})]})]})}),(0,r.jsx)(i.Zp,{children:(0,r.jsxs)(i.Wu,{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-slate-600",children:"Tổng thanh to\xe1n"}),(0,r.jsxs)("p",{className:"text-2xl font-bold text-green-600",children:["$",s.totalPayoutAmount.toFixed(2)]})]}),(0,r.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:(0,r.jsx)(j.A,{className:"w-6 h-6 text-green-600"})})]}),(0,r.jsx)("div",{className:"flex items-center mt-2 text-sm",children:(0,r.jsxs)("span",{className:"text-slate-600",children:[s.totalPayouts," giao dịch"]})})]})}),(0,r.jsx)(i.Zp,{children:(0,r.jsxs)(i.Wu,{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-slate-600",children:"Đang xử l\xfd"}),(0,r.jsxs)("p",{className:"text-2xl font-bold text-yellow-600",children:["$",s.pendingPayoutAmount.toFixed(2)]})]}),(0,r.jsx)("div",{className:"w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center",children:(0,r.jsx)(b.A,{className:"w-6 h-6 text-yellow-600"})})]}),(0,r.jsx)("div",{className:"flex items-center mt-2 text-sm",children:(0,r.jsxs)("span",{className:"text-slate-600",children:[s.pendingPayouts," giao dịch"]})})]})}),(0,r.jsx)(i.Zp,{children:(0,r.jsxs)(i.Wu,{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-slate-600",children:"Th\xe1ng n\xe0y"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:s.currentMonthSignups})]}),(0,r.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center",children:(0,r.jsx)(g.A,{className:"w-6 h-6 text-purple-600"})})]}),(0,r.jsx)("div",{className:"flex items-center mt-2 text-sm",children:(0,r.jsx)("span",{className:"text-slate-600",children:"Đăng k\xfd mới"})})]})})]})}),(0,r.jsx)(x.TabsContent,{value:"users",className:"space-y-6",children:(0,r.jsxs)(i.Zp,{children:[(0,r.jsx)(i.aR,{children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)(i.ZB,{children:"Quản l\xfd người d\xf9ng"}),(0,r.jsxs)("div",{className:"flex space-x-3",children:[(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsxs)(u.l6,{value:L.userRole,onValueChange:e=>U(t=>({...t,userRole:e})),children:[(0,r.jsx)(u.bq,{className:"w-32",children:(0,r.jsx)(u.yv,{})}),(0,r.jsxs)(u.gC,{children:[(0,r.jsx)(u.eb,{value:"all",children:"Tất cả"}),(0,r.jsx)(u.eb,{value:"USER",children:"User"}),(0,r.jsx)(u.eb,{value:"ADMIN",children:"Admin"}),(0,r.jsx)(u.eb,{value:"CONCIERGE",children:"Concierge"})]})]}),(0,r.jsxs)(u.l6,{value:L.userStatus,onValueChange:e=>U(t=>({...t,userStatus:e})),children:[(0,r.jsx)(u.bq,{className:"w-32",children:(0,r.jsx)(u.yv,{})}),(0,r.jsxs)(u.gC,{children:[(0,r.jsx)(u.eb,{value:"all",children:"Tất cả"}),(0,r.jsx)(u.eb,{value:"verified",children:"Đ\xe3 x\xe1c thực"}),(0,r.jsx)(u.eb,{value:"unverified",children:"Chưa x\xe1c thực"})]})]})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(v.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"}),(0,r.jsx)(o.p,{placeholder:"T\xecm kiếm...",value:L.search,onChange:e=>U(t=>({...t,search:e.target.value})),className:"pl-10 w-64"})]})]})]})}),(0,r.jsx)(i.Wu,{children:(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"border-b",children:[(0,r.jsx)("th",{className:"text-left p-3",children:"Người d\xf9ng"}),(0,r.jsx)("th",{className:"text-left p-3",children:"Vai tr\xf2"}),(0,r.jsx)("th",{className:"text-left p-3",children:"Email"}),(0,r.jsx)("th",{className:"text-left p-3",children:"S\xe0n"}),(0,r.jsx)("th",{className:"text-left p-3",children:"Tiết kiệm"}),(0,r.jsx)("th",{className:"text-left p-3",children:"Ng\xe0y tham gia"}),(0,r.jsx)("th",{className:"text-left p-3",children:"Thao t\xe1c"})]})}),(0,r.jsx)("tbody",{children:z.map(e=>(0,r.jsxs)("tr",{className:"border-b hover:bg-slate-50",children:[(0,r.jsx)("td",{className:"p-3",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium",children:e.name}),(0,r.jsx)("p",{className:"text-sm text-slate-600",children:e.referralCode})]})}),(0,r.jsx)("td",{className:"p-3",children:(0,r.jsx)(d.E,{variant:"ADMIN"===e.role?"default":"secondary",children:e.role})}),(0,r.jsx)("td",{className:"p-3",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"text-sm",children:e.email}),e.emailVerified?(0,r.jsx)(f.A,{className:"w-4 h-4 text-green-600"}):(0,r.jsx)(y.A,{className:"w-4 h-4 text-yellow-600"})]})}),(0,r.jsx)("td",{className:"p-3",children:e.preferredBroker||"-"}),(0,r.jsxs)("td",{className:"p-3",children:["$",e.totalSavings.toFixed(2)]}),(0,r.jsx)("td",{className:"p-3",children:new Date(e.createdAt).toLocaleDateString("vi-VN")}),(0,r.jsx)("td",{className:"p-3",children:(0,r.jsx)(c.$,{variant:"ghost",size:"sm",children:(0,r.jsx)(N.A,{className:"w-4 h-4"})})})]},e.id))})]})})})]})}),(0,r.jsx)(x.TabsContent,{value:"payouts",className:"space-y-6",children:(0,r.jsxs)(i.Zp,{children:[(0,r.jsx)(i.aR,{children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)(i.ZB,{children:"Quản l\xfd thanh to\xe1n"}),(0,r.jsxs)(u.l6,{value:L.payoutStatus,onValueChange:e=>U(t=>({...t,payoutStatus:e})),children:[(0,r.jsx)(u.bq,{className:"w-32",children:(0,r.jsx)(u.yv,{})}),(0,r.jsxs)(u.gC,{children:[(0,r.jsx)(u.eb,{value:"all",children:"Tất cả"}),(0,r.jsx)(u.eb,{value:"PENDING",children:"Đang xử l\xfd"}),(0,r.jsx)(u.eb,{value:"PROCESSED",children:"Đ\xe3 xử l\xfd"}),(0,r.jsx)(u.eb,{value:"FAILED",children:"Thất bại"})]})]})]})}),(0,r.jsx)(i.Wu,{children:(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"border-b",children:[(0,r.jsx)("th",{className:"text-left p-3",children:"Người d\xf9ng"}),(0,r.jsx)("th",{className:"text-left p-3",children:"Số tiền"}),(0,r.jsx)("th",{className:"text-left p-3",children:"Kỳ"}),(0,r.jsx)("th",{className:"text-left p-3",children:"S\xe0n"}),(0,r.jsx)("th",{className:"text-left p-3",children:"Trạng th\xe1i"}),(0,r.jsx)("th",{className:"text-left p-3",children:"Ng\xe0y tạo"}),(0,r.jsx)("th",{className:"text-left p-3",children:"Thao t\xe1c"})]})}),(0,r.jsx)("tbody",{children:B.map(e=>(0,r.jsxs)("tr",{className:"border-b hover:bg-slate-50",children:[(0,r.jsx)("td",{className:"p-3",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium",children:e.user.name}),(0,r.jsx)("p",{className:"text-sm text-slate-600",children:e.user.email})]})}),(0,r.jsxs)("td",{className:"p-3 font-semibold",children:["$",e.amount.toFixed(2)]}),(0,r.jsx)("td",{className:"p-3",children:e.period}),(0,r.jsx)("td",{className:"p-3",children:e.broker}),(0,r.jsx)("td",{className:"p-3",children:(0,r.jsx)(d.E,{variant:"PROCESSED"===e.status?"default":"PENDING"===e.status?"secondary":"destructive",children:"PROCESSED"===e.status?"Đ\xe3 xử l\xfd":"PENDING"===e.status?"Đang xử l\xfd":"Thất bại"})}),(0,r.jsx)("td",{className:"p-3",children:new Date(e.createdAt).toLocaleDateString("vi-VN")}),(0,r.jsx)("td",{className:"p-3",children:"PENDING"===e.status&&(0,r.jsxs)(c.$,{size:"sm",onClick:()=>G(e.id),children:[(0,r.jsx)(f.A,{className:"w-4 h-4 mr-1"}),"Xử l\xfd"]})})]},e.id))})]})})})]})}),(0,r.jsx)(x.TabsContent,{value:"settings",className:"space-y-6",children:(0,r.jsxs)(i.Zp,{children:[(0,r.jsx)(i.aR,{children:(0,r.jsx)(i.ZB,{children:"C\xe0i đặt hệ thống"})}),(0,r.jsx)(i.Wu,{children:(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)(w.A,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-slate-600",children:"C\xe0i đặt hệ thống đang được ph\xe1t triển"})]})})]})})]})]})]})})})}},78122:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(40307).A)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},79646:e=>{"use strict";e.exports=require("child_process")},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},85763:(e,t,s)=>{"use strict";s.d(t,{Tabs:()=>l,TabsContent:()=>d,TabsList:()=>i,TabsTrigger:()=>c});var r=s(60687);s(43210);var a=s(55146),n=s(4780);function l({className:e,...t}){return(0,r.jsx)(a.bL,{"data-slot":"tabs",className:(0,n.cn)("flex flex-col gap-2",e),...t})}function i({className:e,...t}){return(0,r.jsx)(a.B8,{"data-slot":"tabs-list",className:(0,n.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...t})}function c({className:e,...t}){return(0,r.jsx)(a.l9,{"data-slot":"tabs-trigger",className:(0,n.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function d({className:e,...t}){return(0,r.jsx)(a.UC,{"data-slot":"tabs-content",className:(0,n.cn)("flex-1 outline-none",e),...t})}},86897:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{getRedirectError:function(){return l},getRedirectStatusCodeFromError:function(){return u},getRedirectTypeFromError:function(){return o},getURLFromRedirectError:function(){return d},permanentRedirect:function(){return c},redirect:function(){return i}});let r=s(52836),a=s(49026),n=s(19121).actionAsyncStorage;function l(e,t,s){void 0===s&&(s=r.RedirectStatusCode.TemporaryRedirect);let n=Object.defineProperty(Error(a.REDIRECT_ERROR_CODE),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return n.digest=a.REDIRECT_ERROR_CODE+";"+t+";"+e+";"+s+";",n}function i(e,t){var s;throw null!=t||(t=(null==n||null==(s=n.getStore())?void 0:s.isAction)?a.RedirectType.push:a.RedirectType.replace),l(e,t,r.RedirectStatusCode.TemporaryRedirect)}function c(e,t){throw void 0===t&&(t=a.RedirectType.replace),l(e,t,r.RedirectStatusCode.PermanentRedirect)}function d(e){return(0,a.isRedirectError)(e)?e.digest.split(";").slice(2,-2).join(";"):null}function o(e){if(!(0,a.isRedirectError)(e))throw Object.defineProperty(Error("Not a redirect error"),"__NEXT_ERROR_CODE",{value:"E260",enumerable:!1,configurable:!0});return e.digest.split(";",2)[1]}function u(e){if(!(0,a.isRedirectError)(e))throw Object.defineProperty(Error("Not a redirect error"),"__NEXT_ERROR_CODE",{value:"E260",enumerable:!1,configurable:!0});return Number(e.digest.split(";").at(-2))}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},89667:(e,t,s)=>{"use strict";s.d(t,{p:()=>n});var r=s(60687);s(43210);var a=s(4780);function n({className:e,type:t,...s}){return(0,r.jsx)("input",{type:t,"data-slot":"input",className:(0,a.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...s})}},90561:(e,t,s)=>{"use strict";s.d(t,{A:()=>x});var r=s(60687),a=s(82136),n=s(16189);s(43210);var l=s(44493),i=s(29523),c=s(99891);let d=(0,s(40307).A)("log-in",[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]]);var o=s(85814),u=s.n(o);function x({children:e,fallback:t}){let{data:s,status:o}=(0,a.useSession)();return((0,n.useRouter)(),"loading"===o)?(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-slate-600",children:"Đang kiểm tra x\xe1c thực..."})]})}):s?(0,r.jsx)(r.Fragment,{children:e}):t||(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white flex items-center justify-center px-4",children:(0,r.jsx)("div",{className:"max-w-md w-full",children:(0,r.jsxs)(l.Zp,{children:[(0,r.jsxs)(l.aR,{className:"text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)(c.A,{className:"w-8 h-8 text-blue-600"})}),(0,r.jsx)(l.ZB,{className:"text-2xl",children:"Y\xeau cầu x\xe1c thực"})]}),(0,r.jsxs)(l.Wu,{className:"space-y-4 text-center",children:[(0,r.jsx)("p",{className:"text-slate-600",children:"Bạn cần đăng nhập để truy cập trang n\xe0y."}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(u(),{href:"/auth/signin",children:(0,r.jsxs)(i.$,{className:"w-full bg-blue-600 hover:bg-blue-700",children:[(0,r.jsx)(d,{className:"w-4 h-4 mr-2"}),"Đăng nhập"]})}),(0,r.jsx)(u(),{href:"/auth/signup",children:(0,r.jsx)(i.$,{variant:"outline",className:"w-full",children:"Tạo t\xe0i khoản mới"})})]})]})]})})})}},91645:e=>{"use strict";e.exports=require("net")},93613:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(40307).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},94735:e=>{"use strict";e.exports=require("events")},96330:e=>{"use strict";e.exports=require("@prisma/client")},97576:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{ReadonlyURLSearchParams:function(){return o},RedirectType:function(){return a.RedirectType},forbidden:function(){return l.forbidden},notFound:function(){return n.notFound},permanentRedirect:function(){return r.permanentRedirect},redirect:function(){return r.redirect},unauthorized:function(){return i.unauthorized},unstable_rethrow:function(){return c.unstable_rethrow}});let r=s(86897),a=s(49026),n=s(62765),l=s(48976),i=s(70899),c=s(163);class d extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class o extends URLSearchParams{append(){throw new d}delete(){throw new d}set(){throw new d}sort(){throw new d}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},99270:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(40307).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[7719,4999,8044,9854,1193,1658,9365,1726,5146,5814,955,2795,2581,4110],()=>s(48641));module.exports=r})();