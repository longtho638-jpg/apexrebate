(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6636],{22346:(e,s,a)=>{"use strict";a.d(s,{w:()=>t});var l=a(95155);a(12115);var i=a(87489),n=a(59434);function t(e){let{className:s,orientation:a="horizontal",decorative:t=!0,...r}=e;return(0,l.jsx)(i.b,{"data-slot":"separator",decorative:t,orientation:a,className:(0,n.cn)("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",s),...r})}},33246:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>Z});var l=a(95155),i=a(12115),n=a(12108),t=a(35695),r=a(6874),c=a.n(r),d=a(30285),o=a(66695),h=a(62523),x=a(85057),m=a(59409),u=a(26126),j=a(22346),b=a(91394),g=a(85339),p=a(54416),f=a(4229),v=a(56287),N=a(71007),w=a(33109),y=a(381),C=a(72713),k=a(69037),T=a(16785),S=a(55868),A=a(17580),U=a(59947),F=a(14186),B=a(79787);function Z(){var e,s,a,r;let{data:Z,status:$}=(0,n.useSession)(),V=(0,t.useRouter)(),[O,J]=(0,i.useState)(!1),[W,q]=(0,i.useState)(!0),[z,R]=(0,i.useState)(!1),[_,D]=(0,i.useState)(""),[H,L]=(0,i.useState)(null),[E,K]=(0,i.useState)(null);(0,i.useEffect)(()=>{if("loading"!==$){if(!Z)return void V.push("/auth/signin");P()}},[Z,$,V]);let P=async()=>{try{let e=await fetch("/api/user/profile"),s=await e.json();if(s.success)L(s.data),K(s.data);else if(null==Z?void 0:Z.user){let e={id:Z.user.id||"",email:Z.user.email||"",name:Z.user.name||"",image:Z.user.image||void 0,role:Z.user.role||"user",tradingVolume:0,preferredBroker:"binance",experience:"beginner",referralCode:"",referralCount:0,totalSavings:0,memberSince:new Date().toISOString(),status:"active",notifications:{email:!0,payout:!0,referral:!0,weekly:!0}};L(e),K(e)}}catch(e){console.error("Failed to fetch profile:",e)}finally{q(!1)}},M=async()=>{if(E){R(!0),D("");try{let e=await fetch("/api/user/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(E)}),s=await e.json();s.success?(L(E),J(!1),D("✅ Profile updated successfully!")):D("❌ ".concat(s.error||"Failed to update profile"))}catch(e){console.error("Failed to update profile:",e),D("❌ Failed to update profile")}finally{R(!1)}}},G=(e,s)=>{E&&K({...E,[e]:s})},I=(e,s)=>{E&&K({...E,notifications:{...E.notifications,[e]:s}})};return"loading"===$||W?(0,l.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white",children:[(0,l.jsx)(B.A,{}),(0,l.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,l.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})]}):H?(0,l.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white",children:[(0,l.jsx)(B.A,{}),(0,l.jsx)("section",{className:"py-8 px-4 sm:px-6 lg:px-8",children:(0,l.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-slate-900",children:"Hồ sơ c\xe1 nh\xe2n"}),(0,l.jsx)("p",{className:"text-slate-600",children:"Quản l\xfd th\xf4ng tin v\xe0 c\xe0i đặt giao dịch của bạn"})]}),(0,l.jsx)("div",{className:"flex items-center space-x-3",children:O?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(d.$,{variant:"outline",onClick:()=>{J(!1),K(H),D("")},disabled:z,children:[(0,l.jsx)(p.A,{className:"w-4 h-4 mr-2"}),"Hủy"]}),(0,l.jsx)(d.$,{onClick:M,disabled:z,className:"bg-blue-600 hover:bg-blue-700",children:z?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Đang lưu..."]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(f.A,{className:"w-4 h-4 mr-2"}),"Lưu thay đổi"]})})]}):(0,l.jsxs)(d.$,{onClick:()=>{J(!0),D("")},variant:"outline",children:[(0,l.jsx)(v.A,{className:"w-4 h-4 mr-2"}),"Chỉnh sửa"]})})]}),_&&(0,l.jsx)("div",{className:"p-4 rounded-lg mb-6 ".concat(_.includes("✅")?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"),children:_})]})}),(0,l.jsx)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 pb-12",children:(0,l.jsxs)("div",{className:"grid lg:grid-cols-3 gap-6",children:[(0,l.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,l.jsxs)(o.Zp,{children:[(0,l.jsx)(o.aR,{children:(0,l.jsxs)(o.ZB,{className:"flex items-center",children:[(0,l.jsx)(N.A,{className:"w-5 h-5 mr-2"}),"Th\xf4ng tin cơ bản"]})}),(0,l.jsxs)(o.Wu,{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsxs)(b.eu,{className:"h-16 w-16",children:[(0,l.jsx)(b.BK,{src:H.image,alt:H.name}),(0,l.jsx)(b.q5,{className:"bg-blue-600 text-white text-lg",children:H.name.charAt(0).toUpperCase()})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-slate-900",children:H.name}),(0,l.jsx)("p",{className:"text-slate-600",children:H.email}),(0,l.jsx)(u.E,{variant:"secondary",className:"mt-1",children:H.role})]})]}),(0,l.jsx)(j.w,{}),(0,l.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(x.J,{htmlFor:"name",children:"Họ v\xe0 t\xean"}),(0,l.jsx)(h.p,{id:"name",value:(null==E?void 0:E.name)||"",onChange:e=>G("name",e.target.value),disabled:!O,className:"mt-1"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(x.J,{htmlFor:"phone",children:"Số điện thoại"}),(0,l.jsx)(h.p,{id:"phone",value:(null==E?void 0:E.phone)||"",onChange:e=>G("phone",e.target.value),disabled:!O,placeholder:"+84 123 456 789",className:"mt-1"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(x.J,{htmlFor:"timezone",children:"M\xfai giờ"}),(0,l.jsxs)(m.l6,{value:(null==E?void 0:E.timezone)||"UTC+7",onValueChange:e=>G("timezone",e),disabled:!O,children:[(0,l.jsx)(m.bq,{className:"mt-1",children:(0,l.jsx)(m.yv,{})}),(0,l.jsxs)(m.gC,{children:[(0,l.jsx)(m.eb,{value:"UTC+7",children:"UTC+7 (H\xe0 Nội)"}),(0,l.jsx)(m.eb,{value:"UTC+8",children:"UTC+8 (Singapore)"}),(0,l.jsx)(m.eb,{value:"UTC+9",children:"UTC+9 (Tokyo)"}),(0,l.jsx)(m.eb,{value:"UTC+0",children:"UTC+0 (London)"}),(0,l.jsx)(m.eb,{value:"UTC-5",children:"UTC-5 (New York)"}),(0,l.jsx)(m.eb,{value:"UTC-8",children:"UTC-8 (San Francisco)"})]})]})]})]})]}),(0,l.jsxs)(o.Zp,{children:[(0,l.jsx)(o.aR,{children:(0,l.jsxs)(o.ZB,{className:"flex items-center",children:[(0,l.jsx)(w.A,{className:"w-5 h-5 mr-2"}),"Th\xf4ng tin giao dịch"]})}),(0,l.jsxs)(o.Wu,{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(x.J,{htmlFor:"tradingVolume",children:"Khối lượng giao dịch h\xe0ng th\xe1ng (USD)"}),(0,l.jsx)(h.p,{id:"tradingVolume",type:"number",value:(null==E?void 0:E.tradingVolume)||0,onChange:e=>G("tradingVolume",parseFloat(e.target.value)),disabled:!O,placeholder:"1,000,000",className:"mt-1"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(x.J,{htmlFor:"preferredBroker",children:"S\xe0n giao dịch ưa th\xedch"}),(0,l.jsxs)(m.l6,{value:(null==E?void 0:E.preferredBroker)||"binance",onValueChange:e=>G("preferredBroker",e),disabled:!O,children:[(0,l.jsx)(m.bq,{className:"mt-1",children:(0,l.jsx)(m.yv,{})}),(0,l.jsxs)(m.gC,{children:[(0,l.jsx)(m.eb,{value:"binance",children:"Binance"}),(0,l.jsx)(m.eb,{value:"bybit",children:"Bybit"}),(0,l.jsx)(m.eb,{value:"okx",children:"OKX"}),(0,l.jsx)(m.eb,{value:"huobi",children:"Huobi"}),(0,l.jsx)(m.eb,{value:"kucoin",children:"KuCoin"})]})]})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(x.J,{htmlFor:"experience",children:"Kinh nghiệm giao dịch"}),(0,l.jsxs)(m.l6,{value:(null==E?void 0:E.experience)||"beginner",onValueChange:e=>G("experience",e),disabled:!O,children:[(0,l.jsx)(m.bq,{className:"mt-1",children:(0,l.jsx)(m.yv,{})}),(0,l.jsxs)(m.gC,{children:[(0,l.jsx)(m.eb,{value:"beginner",children:"Mới bắt đầu (<1 năm)"}),(0,l.jsx)(m.eb,{value:"intermediate",children:"Trung cấp (1-3 năm)"}),(0,l.jsx)(m.eb,{value:"advanced",children:"N\xe2ng cao (3-5 năm)"}),(0,l.jsx)(m.eb,{value:"expert",children:"Chuy\xean gia (>5 năm)"})]})]})]})]})]}),(0,l.jsxs)(o.Zp,{children:[(0,l.jsx)(o.aR,{children:(0,l.jsxs)(o.ZB,{className:"flex items-center",children:[(0,l.jsx)(y.A,{className:"w-5 h-5 mr-2"}),"C\xe0i đặt th\xf4ng b\xe1o"]})}),(0,l.jsx)(o.Wu,{className:"space-y-4",children:(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium text-slate-900",children:"Th\xf4ng b\xe1o email"}),(0,l.jsx)("p",{className:"text-sm text-slate-600",children:"Nhận th\xf4ng b\xe1o quan trọng qua email"})]}),(0,l.jsx)("input",{type:"checkbox",checked:(null==E||null==(e=E.notifications)?void 0:e.email)||!1,onChange:e=>I("email",e.target.checked),disabled:!O,className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium text-slate-900",children:"Th\xf4ng b\xe1o ho\xe0n ph\xed"}),(0,l.jsx)("p",{className:"text-sm text-slate-600",children:"Nhận th\xf4ng b\xe1o khi c\xf3 ho\xe0n ph\xed mới"})]}),(0,l.jsx)("input",{type:"checkbox",checked:(null==E||null==(s=E.notifications)?void 0:s.payout)||!1,onChange:e=>I("payout",e.target.checked),disabled:!O,className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium text-slate-900",children:"Th\xf4ng b\xe1o giới thiệu"}),(0,l.jsx)("p",{className:"text-sm text-slate-600",children:"Nhận th\xf4ng b\xe1o khi c\xf3 người d\xf9ng m\xe3 giới thiệu"})]}),(0,l.jsx)("input",{type:"checkbox",checked:(null==E||null==(a=E.notifications)?void 0:a.referral)||!1,onChange:e=>I("referral",e.target.checked),disabled:!O,className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium text-slate-900",children:"B\xe1o c\xe1o h\xe0ng tuần"}),(0,l.jsx)("p",{className:"text-sm text-slate-600",children:"Nhận b\xe1o c\xe1o tổng kết h\xe0ng tuần từ Concierge"})]}),(0,l.jsx)("input",{type:"checkbox",checked:(null==E||null==(r=E.notifications)?void 0:r.weekly)||!1,onChange:e=>I("weekly",e.target.checked),disabled:!O,className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"})]})]})})]})]}),(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)(o.Zp,{children:[(0,l.jsx)(o.aR,{children:(0,l.jsxs)(o.ZB,{className:"flex items-center",children:[(0,l.jsx)(C.A,{className:"w-5 h-5 mr-2"}),"Thống k\xea"]})}),(0,l.jsxs)(o.Wu,{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:["$",H.totalSavings.toLocaleString()]}),(0,l.jsx)("p",{className:"text-sm text-slate-600",children:"Tổng tiết kiệm"})]}),(0,l.jsx)(j.w,{}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-center",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-lg font-semibold text-blue-600",children:H.referralCount}),(0,l.jsx)("p",{className:"text-xs text-slate-600",children:"Lời giới thiệu"})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"text-lg font-semibold text-purple-600",children:["$",(4e-4*H.tradingVolume*12).toFixed(0)]}),(0,l.jsx)("p",{className:"text-xs text-slate-600",children:"Ph\xed/năm"})]})]})]})]}),(0,l.jsxs)(o.Zp,{children:[(0,l.jsx)(o.aR,{children:(0,l.jsxs)(o.ZB,{className:"flex items-center",children:[(0,l.jsx)(k.A,{className:"w-5 h-5 mr-2"}),"M\xe3 giới thiệu"]})}),(0,l.jsx)(o.Wu,{children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"bg-slate-100 rounded-lg p-3 mb-3",children:(0,l.jsx)("div",{className:"text-xl font-bold text-slate-900",children:H.referralCode||"COMING_SOON"})}),(0,l.jsx)("p",{className:"text-sm text-slate-600 mb-3",children:"Chia sẻ m\xe3 n\xe0y với bạn b\xe8 để nhận thưởng"}),(0,l.jsxs)(d.$,{variant:"outline",size:"sm",className:"w-full",children:[(0,l.jsx)(T.A,{className:"w-4 h-4 mr-2"}),"Sao ch\xe9p m\xe3"]})]})})]}),(0,l.jsxs)(o.Zp,{children:[(0,l.jsx)(o.aR,{children:(0,l.jsxs)(o.ZB,{className:"flex items-center",children:[(0,l.jsx)(y.A,{className:"w-5 h-5 mr-2"}),"H\xe0nh động nhanh"]})}),(0,l.jsxs)(o.Wu,{className:"space-y-3",children:[(0,l.jsx)(c(),{href:"/dashboard",children:(0,l.jsxs)(d.$,{variant:"outline",className:"w-full justify-start",children:[(0,l.jsx)(w.A,{className:"w-4 h-4 mr-2"}),"Dashboard"]})}),(0,l.jsx)(c(),{href:"/payouts",children:(0,l.jsxs)(d.$,{variant:"outline",className:"w-full justify-start",children:[(0,l.jsx)(S.A,{className:"w-4 h-4 mr-2"}),"Lịch sử ho\xe0n ph\xed"]})}),(0,l.jsx)(c(),{href:"/referrals",children:(0,l.jsxs)(d.$,{variant:"outline",className:"w-full justify-start",children:[(0,l.jsx)(A.A,{className:"w-4 h-4 mr-2"}),"Quản l\xfd giới thiệu"]})}),(0,l.jsx)(c(),{href:"/faq",children:(0,l.jsxs)(d.$,{variant:"outline",className:"w-full justify-start",children:[(0,l.jsx)(U.A,{className:"w-4 h-4 mr-2"}),"Trợ gi\xfap"]})}),(0,l.jsx)(j.w,{}),(0,l.jsxs)(d.$,{variant:"outline",className:"w-full justify-start text-red-600 hover:text-red-700",onClick:()=>{(0,n.signOut)({callbackUrl:"/"})},children:[(0,l.jsx)(p.A,{className:"w-4 h-4 mr-2"}),"Đăng xuất"]})]})]}),(0,l.jsx)(o.Zp,{children:(0,l.jsx)(o.Wu,{className:"pt-6",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)(F.A,{className:"w-8 h-8 text-slate-400 mx-auto mb-2"}),(0,l.jsx)("p",{className:"text-sm text-slate-600",children:"Th\xe0nh vi\xean từ"}),(0,l.jsx)("p",{className:"font-semibold text-slate-900",children:new Date(H.memberSince).toLocaleDateString("vi-VN")})]})})})]})]})})]}):(0,l.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white",children:[(0,l.jsx)(B.A,{}),(0,l.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,l.jsx)(o.Zp,{className:"max-w-md w-full",children:(0,l.jsxs)(o.Wu,{className:"p-6 text-center",children:[(0,l.jsx)(g.A,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),(0,l.jsx)("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Profile not found"}),(0,l.jsx)("p",{className:"text-slate-600 mb-4",children:"Unable to load your profile information."}),(0,l.jsx)(d.$,{onClick:()=>V.push("/dashboard"),children:"Go to Dashboard"})]})})})]})}},62523:(e,s,a)=>{"use strict";a.d(s,{p:()=>n});var l=a(95155);a(12115);var i=a(59434);function n(e){let{className:s,type:a,...n}=e;return(0,l.jsx)("input",{type:a,"data-slot":"input",className:(0,i.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",s),...n})}},85057:(e,s,a)=>{"use strict";a.d(s,{J:()=>t});var l=a(95155);a(12115);var i=a(40968),n=a(59434);function t(e){let{className:s,...a}=e;return(0,l.jsx)(i.b,{"data-slot":"label",className:(0,n.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",s),...a})}},85183:(e,s,a)=>{Promise.resolve().then(a.bind(a,33246))}},e=>{var s=s=>e(e.s=s);e.O(0,[3455,3942,2108,6874,1057,8583,8431,9787,8441,1684,7358],()=>s(85183)),_N_E=e.O()}]);